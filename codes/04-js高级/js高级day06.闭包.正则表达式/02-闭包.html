<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // 需求：在fn函数的外面访问到num的值
    // function fn() {
    //   var num = 10
    //   return num
    // }
    // var ret = fn();
    // console.log(ret);


    // 需求：在fn函数的外面修改到num的值
    function fn() {
      var num = 10
      function inner(n) {
        num = n;
        console.log(num);
      }

      return inner;
    }
    var ret = fn();
    ret(1000)

    /* 
    闭包：函数和申明该函数的词法环境的组合（closure）
      函数：inner函数
      申明该函数：fn函数
      词法环境：作用域链
      组合：是一个整体    
    
    闭包形成条件：
      有两个函数，嵌套关系，内部函数必须要访问外部函数的变量。
    */

    // 闭包的基本模型：
    // function outer() {
    //   var count = 0;
    //   function inner() {
    //     count++;
    //     console.log(count);
    //   }
    //   return inner;
    // }
    
    // 简写模型
    function outer() {
      var count = 0;
      return function () {
        count++;
        console.log(count);
      }
    }

  </script>
</body>

</html>